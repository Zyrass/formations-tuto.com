<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Introduction à l'animation dans le canvas</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            .myCanvas {
                border: 1px solid #000;
            }
        </style>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <h1>Introduction à l'animation dans un CANVAS</h1>
        <hr>
        <h2>First anim</h2>
        <canvas width="600" height="450" class="myCanvas" id="canvasAnim">
            <p>Si ce message s'affiche, c'est que votre navigateur ne supporte pas la balise Canvas.</p>
        </canvas>

        <script>
            window.onload = init;

            var canvas;
            var context;

            var posX        = 300;
            var posY        = 225;
            var velX        = 15; // Vel pour vélocité soit la vitesse
            var velY    = 15;
            var radius      = 25;

            function init(){
                canvas     = document.getElementById('canvasAnim');

                context    = canvas.getContext('2d');

                // Methode setInterval permet de répété une fonction toutes les X milliseconde.
                // 1er paramètre - la fonction qu'on veut déclencher toutes les X milliseconde
                // 2eme paramètre - le délai
                setInterval(anim, 1000/30);
            }

            function anim(){
                // context.clearRect() permet d'effacer le contenu du canvas
                context.clearRect(0,0, canvas.width, canvas.height); // position en X, position en Y, la largeur du canvas, la hauteur du canvas
                posX += velX; // Permet de décalé la position X de 5 à chaque fois.
                posY += velY; // Permet de décalé la position Y de 5 à chaque fois.

                if (posX - radius < 0 || posX + radius > canvas.width){
                    velX = -velX;
                }

                if (posY + radius > canvas.height || posY - radius < 0) {
                    velY = -velY;
                }

                context.fillStyle = '#669900';
                context.beginPath();
                context.arc(posX, posY, radius, 0, Math.PI*2, false);
                context.fill();
                context.closePath();
            }

            
        </script>

    </body>
</html>